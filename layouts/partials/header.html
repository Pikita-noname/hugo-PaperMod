{{- /* theme-toggle is enabled */}}
{{- if (not site.Params.disableThemeToggle) }}
{{- /* theme is light */}}
{{- if (eq site.Params.defaultTheme "light") }}
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>
{{- /* theme is dark */}}
{{- else if (eq site.Params.defaultTheme "dark") }}
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>
{{- else }}
{{- /* theme is auto */}}
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
{{- end }}
{{- /* theme-toggle is disabled and theme is auto */}}
{{- else if (and (ne site.Params.defaultTheme "light") (ne site.Params.defaultTheme "dark"))}}
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
{{- end }}

<header class="header">
    <nav class="nav">
        <div class="logo">
            {{- $label_text := (site.Params.label.text | default site.Title) }}
            {{- if site.Title }}
            <a href="{{ "" | absLangURL }}" accesskey="h" title="{{ $label_text }} (Alt + H)">
                <svg xmlns="http://www.w3.org/2000/svg" width="143" height="31" viewBox="0 0 143 31" fill="none" style="fill: var(--primary);">
<rect x="2" y="10" width="13" height="1" rx="0.5" fill="#818181"/>
<rect x="6" y="13" width="5" height="1" rx="0.5" fill="#818181"/>
<rect x="30" y="13" width="5" height="1" rx="0.5" fill="#818181"/>
<rect x="31" y="16" width="5" height="1" rx="0.5" fill="#818181"/>
<rect x="29" y="20" width="5" height="1" rx="0.5" fill="#818181"/>
<rect x="31" y="9" width="6" height="1" rx="0.5" fill="#818181"/>
<rect y="16" width="10" height="1" rx="0.5" fill="#818181"/>
<rect x="7" y="20" width="13" height="1" rx="0.5" fill="#818181"/>
<rect x="7" y="27" width="13" height="1" rx="0.5" fill="#818181"/>
<path d="M20.8 30.112C19.6266 30.112 18.528 30.0267 17.504 29.856C16.48 29.7067 15.5946 29.4827 14.848 29.184C14.2293 28.9707 13.792 28.6613 13.536 28.256C13.28 27.8507 13.1626 27.424 13.184 26.976C13.2053 26.528 13.3226 26.1227 13.536 25.76C13.7706 25.3973 14.08 25.1307 14.464 24.96C14.848 24.8107 15.2746 24.8213 15.744 24.992C16.6826 25.376 17.536 25.6213 18.304 25.728C19.072 25.856 19.7226 25.92 20.256 25.92C21.5573 25.92 22.528 25.6427 23.168 25.088C23.8293 24.5547 24.16 23.712 24.16 22.56V20.544H24.416C24.096 21.44 23.4453 22.176 22.464 22.752C21.4826 23.3067 20.416 23.584 19.264 23.584C17.856 23.584 16.6293 23.264 15.584 22.624C14.5386 21.9627 13.7173 21.0453 13.12 19.872C12.544 18.6987 12.256 17.3227 12.256 15.744C12.256 14.5493 12.4266 13.472 12.768 12.512C13.1093 11.552 13.5786 10.7307 14.176 10.048C14.7946 9.36533 15.5306 8.84267 16.384 8.48C17.2586 8.096 18.2186 7.904 19.264 7.904C20.4586 7.904 21.5253 8.18133 22.464 8.736C23.424 9.29067 24.064 10.016 24.384 10.912L24.064 12.224V10.816C24.064 9.89867 24.3093 9.19467 24.8 8.704C25.312 8.21333 26.016 7.968 26.912 7.968C27.808 7.968 28.4906 8.21333 28.96 8.704C29.4506 9.19467 29.696 9.89867 29.696 10.816V21.888C29.696 24.6187 28.928 26.6667 27.392 28.032C25.856 29.4187 23.6586 30.112 20.8 30.112ZM21.024 19.392C21.664 19.392 22.208 19.2533 22.656 18.976C23.104 18.6773 23.456 18.2613 23.712 17.728C23.968 17.1733 24.096 16.512 24.096 15.744C24.096 14.592 23.8186 13.696 23.264 13.056C22.7093 12.416 21.9626 12.096 21.024 12.096C20.4266 12.096 19.8933 12.2453 19.424 12.544C18.9546 12.8213 18.592 13.2373 18.336 13.792C18.1013 14.3253 17.984 14.976 17.984 15.744C17.984 16.896 18.2613 17.792 18.816 18.432C19.3706 19.072 20.1066 19.392 21.024 19.392Z" fill="currentColor"/>
<path d="M40.9912 24.352C39.2419 24.352 37.7166 24.0213 36.4152 23.36C35.1139 22.6987 34.1006 21.7493 33.3752 20.512C32.6499 19.2747 32.2872 17.8133 32.2872 16.128C32.2872 14.848 32.4899 13.7067 32.8952 12.704C33.3006 11.68 33.8872 10.816 34.6552 10.112C35.4232 9.38667 36.3406 8.84267 37.4072 8.48C38.4739 8.096 39.6686 7.904 40.9912 7.904C42.7406 7.904 44.2659 8.23467 45.5672 8.896C46.8686 9.55733 47.8712 10.5067 48.5752 11.744C49.3006 12.96 49.6632 14.4213 49.6632 16.128C49.6632 17.3867 49.4606 18.528 49.0552 19.552C48.6499 20.576 48.0632 21.4507 47.2952 22.176C46.5486 22.88 45.6312 23.424 44.5432 23.808C43.4766 24.1707 42.2926 24.352 40.9912 24.352ZM40.9912 20.16C41.5672 20.16 42.0792 20.0213 42.5272 19.744C42.9752 19.4453 43.3166 19.008 43.5512 18.432C43.8072 17.8347 43.9352 17.0667 43.9352 16.128C43.9352 14.6987 43.6579 13.6747 43.1032 13.056C42.5486 12.416 41.8446 12.096 40.9912 12.096C40.4152 12.096 39.9032 12.2347 39.4552 12.512C39.0072 12.7893 38.6552 13.2267 38.3992 13.824C38.1432 14.4 38.0152 15.168 38.0152 16.128C38.0152 17.536 38.2926 18.56 38.8472 19.2C39.4019 19.84 40.1166 20.16 40.9912 20.16Z" fill="currentColor"/>
<path d="M63.7614 30.048C62.8654 30.048 62.172 29.8027 61.6814 29.312C61.1907 28.8213 60.9454 28.1067 60.9454 27.168V10.816C60.9454 9.89867 61.1801 9.19467 61.6494 8.704C62.1401 8.21333 62.8334 7.968 63.7294 7.968C64.6467 7.968 65.34 8.21333 65.8094 8.704C66.3 9.19467 66.5454 9.89867 66.5454 10.816V12.672L66.1934 11.104C66.492 10.144 67.1107 9.376 68.0494 8.8C69.0094 8.20267 70.0974 7.904 71.3134 7.904C72.6787 7.904 73.8734 8.23467 74.8974 8.896C75.9427 9.55733 76.7534 10.496 77.3294 11.712C77.9054 12.928 78.1934 14.4 78.1934 16.128C78.1934 17.8133 77.9054 19.2747 77.3294 20.512C76.7534 21.7493 75.9427 22.6987 74.8974 23.36C73.8734 24.0213 72.6787 24.352 71.3134 24.352C70.1401 24.352 69.0841 24.0747 68.1454 23.52C67.2067 22.9653 66.5774 22.24 66.2574 21.344H66.6414V27.168C66.6414 28.1067 66.3854 28.8213 65.8734 29.312C65.3827 29.8027 64.6787 30.048 63.7614 30.048ZM69.5214 20.16C70.0974 20.16 70.5987 20.0213 71.0254 19.744C71.4734 19.4453 71.8254 19.008 72.0814 18.432C72.3374 17.8347 72.4654 17.0667 72.4654 16.128C72.4654 14.6987 72.1881 13.6747 71.6334 13.056C71.0787 12.416 70.3747 12.096 69.5214 12.096C68.9454 12.096 68.4334 12.2347 67.9854 12.512C67.5374 12.7893 67.1854 13.2267 66.9294 13.824C66.6734 14.4 66.5454 15.168 66.5454 16.128C66.5454 17.536 66.8227 18.56 67.3774 19.2C67.932 19.84 68.6467 20.16 69.5214 20.16Z" fill="currentColor"/>
<path d="M89.3651 24.352C87.4451 24.352 85.7811 24.0213 84.3731 23.36C82.9865 22.6773 81.9198 21.7173 81.1731 20.48C80.4265 19.2427 80.0531 17.7813 80.0531 16.096C80.0531 14.4747 80.4051 13.056 81.1091 11.84C81.8345 10.6027 82.8158 9.64267 84.0531 8.96C85.3118 8.256 86.7411 7.904 88.3411 7.904C89.5145 7.904 90.5811 8.096 91.5411 8.48C92.5011 8.84267 93.3225 9.38667 94.0051 10.112C94.6878 10.816 95.1998 11.6693 95.5411 12.672C95.9038 13.6747 96.0851 14.7947 96.0851 16.032C96.0851 16.4587 95.9678 16.7787 95.7331 16.992C95.4985 17.184 95.1251 17.28 94.6131 17.28H84.8211V14.592H91.9251L91.4131 15.008C91.4131 14.2187 91.3065 13.5787 91.0931 13.088C90.8798 12.5973 90.5598 12.224 90.1331 11.968C89.7278 11.712 89.2158 11.584 88.5971 11.584C87.9358 11.584 87.3598 11.744 86.8691 12.064C86.3998 12.3627 86.0371 12.8107 85.7811 13.408C85.5251 14.0053 85.3971 14.752 85.3971 15.648V15.936C85.3971 17.4507 85.7278 18.5387 86.3891 19.2C87.0718 19.84 88.1171 20.16 89.5251 20.16C89.9945 20.16 90.5278 20.1067 91.1251 20C91.7438 19.872 92.3305 19.7013 92.8851 19.488C93.4398 19.2747 93.9198 19.2427 94.3251 19.392C94.7305 19.52 95.0398 19.7547 95.2531 20.096C95.4878 20.416 95.6158 20.7893 95.6371 21.216C95.6585 21.6213 95.5625 22.0267 95.3491 22.432C95.1358 22.816 94.7838 23.1147 94.2931 23.328C93.5465 23.6693 92.7465 23.9253 91.8931 24.096C91.0611 24.2667 90.2185 24.352 89.3651 24.352Z" fill="currentColor"/>
<path d="M104.683 24.352C103.339 24.352 102.144 24.0213 101.099 23.36C100.075 22.6987 99.2645 21.7493 98.6671 20.512C98.0911 19.2747 97.8031 17.8133 97.8031 16.128C97.8031 14.4 98.0911 12.928 98.6671 11.712C99.2645 10.496 100.075 9.55733 101.099 8.896C102.144 8.23467 103.339 7.904 104.683 7.904C105.856 7.904 106.912 8.18133 107.851 8.736C108.79 9.29067 109.419 10.0053 109.739 10.88H109.387V4.032C109.387 3.09333 109.632 2.37867 110.123 1.888C110.614 1.39733 111.318 1.152 112.235 1.152C113.131 1.152 113.824 1.39733 114.315 1.888C114.827 2.37867 115.083 3.09333 115.083 4.032V21.408C115.083 22.3467 114.838 23.0613 114.347 23.552C113.878 24.0427 113.184 24.288 112.267 24.288C111.371 24.288 110.678 24.0427 110.187 23.552C109.696 23.0613 109.451 22.3467 109.451 21.408V19.584L109.803 21.152C109.504 22.112 108.875 22.8907 107.915 23.488C106.976 24.064 105.899 24.352 104.683 24.352ZM106.507 20.16C107.083 20.16 107.595 20.0213 108.043 19.744C108.491 19.4453 108.832 19.008 109.067 18.432C109.323 17.8347 109.451 17.0667 109.451 16.128C109.451 14.6987 109.174 13.6747 108.619 13.056C108.064 12.416 107.36 12.096 106.507 12.096C105.931 12.096 105.419 12.2347 104.971 12.512C104.523 12.7893 104.171 13.2267 103.915 13.824C103.659 14.4 103.531 15.168 103.531 16.128C103.531 17.536 103.808 18.56 104.363 19.2C104.918 19.84 105.632 20.16 106.507 20.16Z" fill="currentColor"/>
<path d="M121.199 24.288C120.303 24.288 119.61 24.0213 119.119 23.488C118.628 22.9547 118.383 22.1867 118.383 21.184V11.072C118.383 10.0693 118.628 9.30133 119.119 8.768C119.61 8.23467 120.303 7.968 121.199 7.968C122.116 7.968 122.82 8.23467 123.311 8.768C123.823 9.30133 124.079 10.0693 124.079 11.072V21.184C124.079 22.1867 123.834 22.9547 123.343 23.488C122.852 24.0213 122.138 24.288 121.199 24.288ZM121.199 5.696C120.196 5.696 119.418 5.46133 118.863 4.992C118.33 4.52267 118.063 3.84 118.063 2.944C118.063 2.06933 118.33 1.39733 118.863 0.927999C119.418 0.458666 120.196 0.223999 121.199 0.223999C122.244 0.223999 123.034 0.458666 123.567 0.927999C124.1 1.39733 124.367 2.06933 124.367 2.944C124.367 3.84 124.1 4.52267 123.567 4.992C123.034 5.46133 122.244 5.696 121.199 5.696Z" fill="currentColor"/>
<path d="M132.855 24.352C131.639 24.352 130.562 24.128 129.623 23.68C128.706 23.232 127.98 22.624 127.447 21.856C126.935 21.0667 126.679 20.1707 126.679 19.168C126.679 18.016 126.978 17.1093 127.575 16.448C128.172 15.7867 129.132 15.3173 130.455 15.04C131.778 14.7413 133.538 14.592 135.735 14.592H137.495V17.28H135.735C134.903 17.28 134.21 17.344 133.655 17.472C133.122 17.5787 132.727 17.76 132.471 18.016C132.215 18.2507 132.087 18.56 132.087 18.944C132.087 19.4347 132.258 19.84 132.599 20.16C132.962 20.48 133.474 20.64 134.135 20.64C134.668 20.64 135.138 20.5227 135.543 20.288C135.97 20.0533 136.311 19.7333 136.567 19.328C136.823 18.9013 136.951 18.4107 136.951 17.856V14.144C136.951 13.376 136.748 12.832 136.343 12.512C135.959 12.192 135.287 12.032 134.327 12.032C133.815 12.032 133.239 12.096 132.599 12.224C131.959 12.3307 131.244 12.5333 130.455 12.832C129.879 13.0453 129.388 13.0773 128.983 12.928C128.578 12.7787 128.258 12.5227 128.023 12.16C127.81 11.7973 127.703 11.4027 127.703 10.976C127.724 10.5493 127.863 10.144 128.119 9.76C128.396 9.376 128.812 9.07733 129.367 8.864C130.391 8.48 131.33 8.224 132.183 8.096C133.058 7.968 133.858 7.904 134.583 7.904C136.332 7.904 137.772 8.16 138.903 8.672C140.055 9.16267 140.908 9.93067 141.463 10.976C142.039 12 142.327 13.3227 142.327 14.944V21.408C142.327 22.3467 142.103 23.0613 141.655 23.552C141.207 24.0427 140.556 24.288 139.703 24.288C138.828 24.288 138.156 24.0427 137.687 23.552C137.239 23.0613 137.015 22.3467 137.015 21.408V20.576L137.207 21.024C137.1 21.7067 136.855 22.2933 136.471 22.784C136.087 23.2747 135.586 23.6587 134.967 23.936C134.348 24.2133 133.644 24.352 132.855 24.352Z" fill="currentColor"/>
</svg>
            </a>
            {{- end }}
            <div class="logo-switches">
                {{- if (not site.Params.disableThemeToggle) }}
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                {{- end }}

                {{- $lang := .Lang}}
                {{- $separator := or $label_text (not site.Params.disableThemeToggle)}}
                {{- with site.Home.Translations }}
                <ul class="lang-switch">
                    {{- if $separator }}<li>|</li>{{ end }}
                    {{- range . -}}
                    {{- if ne $lang .Lang }}
                    <li>
                        <a href="{{- .Permalink -}}" title="{{ .Language.Params.languageAltTitle | default (.Language.LanguageName | emojify) | default (.Lang | title) }}"
                            aria-label="{{ .Language.LanguageName | default (.Lang | title) }}">
                            {{- if (and site.Params.displayFullLangName (.Language.LanguageName)) }}
                            {{- .Language.LanguageName | emojify -}}
                            {{- else }}
                            {{- .Lang | title -}}
                            {{- end -}}
                        </a>
                    </li>
                    {{- end -}}
                    {{- end}}
                </ul>
                {{- end }}
            </div>
        </div>
        {{- $currentPage := . }}
        <ul id="menu">
            {{- range site.Menus.main }}
            {{- $menu_item_url := (cond (strings.HasSuffix .URL "/") .URL (printf "%s/" .URL) ) | absLangURL }}
            {{- $page_url:= $currentPage.Permalink | absLangURL }}
            {{- $is_search := eq (site.GetPage .KeyName).Layout `search` }}
            <li>
                <a href="{{ .URL | absLangURL }}" title="{{ .Title | default .Name }} {{- cond $is_search (" (Alt + /)" | safeHTMLAttr) ("" | safeHTMLAttr ) }}"
                {{- cond $is_search (" accesskey=/" | safeHTMLAttr) ("" | safeHTMLAttr ) }}>
                    <span {{- if eq $menu_item_url $page_url }} class="active" {{- end }}>
                        {{- .Pre }}
                        {{- .Name -}}
                        {{ .Post -}}
                    </span>
                    {{- if (findRE "://" .URL) }}&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                    {{- end }}
                </a>
            </li>
            {{- end }}
        </ul>
    </nav>
</header>
